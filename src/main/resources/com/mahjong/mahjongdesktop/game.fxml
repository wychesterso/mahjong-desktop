<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.geometry.Insets?>

<BorderPane xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.mahjong.mahjongdesktop.controllers.GameController"
            prefWidth="1400" prefHeight="900"
            style="-fx-background-color: #2d5a3d;">

    <!-- TOP: NORTH PLAYER -->
    <top>
        <VBox spacing="8" style="-fx-padding: 12; -fx-alignment: CENTER;">
            <!-- Name + Turn Indicator -->
            <HBox alignment="CENTER_LEFT" spacing="12">
                <Label fx:id="northNameLabel" text="North Player" 
                        style="-fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold;" />
                <Region fx:id="northTurnIndicator" prefWidth="0" prefHeight="0" 
                        style="-fx-border-color: transparent; -fx-border-radius: 5; -fx-padding: 4;" />
            </HBox>
            
            <!-- Unified hand: Flowers | Melds | Hand (horizontal layout) -->
            <HBox spacing="8" alignment="CENTER">
                <HBox fx:id="northFlowers" spacing="2" alignment="CENTER" style="-fx-border-color: #4a6a5a; -fx-border-width: 1; -fx-padding: 2;" />
                <Separator orientation="VERTICAL" prefHeight="50" />
                <HBox fx:id="northMelds" spacing="4" alignment="CENTER" style="-fx-border-color: #4a6a5a; -fx-border-width: 1; -fx-padding: 2;" />
                <Separator orientation="VERTICAL" prefHeight="50" />
                <HBox fx:id="northHand" spacing="1" alignment="CENTER" />
            </HBox>
            
            <!-- Discards -->
            <HBox fx:id="northDiscards" spacing="4" alignment="CENTER" />
        </VBox>
    </top>

    <!-- BOTTOM: SOUTH PLAYER (YOU) -->
    <bottom>
        <VBox spacing="8" style="-fx-padding: 12; -fx-alignment: CENTER;">
            <!-- Name + Turn Indicator -->
            <HBox alignment="CENTER_LEFT" spacing="12">
                <Label fx:id="southNameLabel" text="You" 
                        style="-fx-text-fill: #ffff99; -fx-font-size: 14px; -fx-font-weight: bold;" />
                <Region fx:id="southTurnIndicator" prefWidth="0" prefHeight="0" 
                        style="-fx-border-color: transparent; -fx-border-radius: 5; -fx-padding: 4;" />
            </HBox>

            <!-- Unified hand: Flowers | Melds | Hand (horizontal layout) -->
            <HBox spacing="8" alignment="CENTER_LEFT" style="-fx-border-color: #4a8a5a; -fx-border-width: 1; -fx-padding: 8;">
                <HBox fx:id="southFlowers" spacing="2" alignment="CENTER" style="-fx-border-color: #4a6a5a; -fx-border-width: 1; -fx-padding: 2;" />
                <Separator orientation="VERTICAL" prefHeight="50" />
                <HBox fx:id="southMelds" spacing="4" alignment="CENTER" style="-fx-border-color: #4a6a5a; -fx-border-width: 1; -fx-padding: 2;" />
                <Separator orientation="VERTICAL" prefHeight="50" />
                <HBox fx:id="southHand" spacing="1" alignment="CENTER_LEFT" />
            </HBox>

            <!-- Action Buttons -->
            <HBox alignment="CENTER" spacing="12" style="-fx-padding: 8;">
                <Label text="Double-click a tile to discard" style="-fx-text-fill: #aaaaaa; -fx-font-size: 11px;" />
                <Separator orientation="VERTICAL" />
                <Button fx:id="pongButton" text="Pong" style="-fx-padding: 6; -fx-font-size: 11px;" visible="false" managed="false" />
                <Button fx:id="sheungButton" text="Sheung" style="-fx-padding: 6; -fx-font-size: 11px;" visible="false" managed="false" />
                <Button fx:id="kongButton" text="Kong" style="-fx-padding: 6; -fx-font-size: 11px;" visible="false" managed="false" />
                <Button fx:id="winButton" text="Win" style="-fx-padding: 6; -fx-font-size: 11px;" visible="false" managed="false" />
                <Button fx:id="passButton" text="Pass" style="-fx-padding: 6; -fx-font-size: 11px;" visible="false" managed="false" />
            </HBox>
        </VBox>
    </bottom>

    <!-- LEFT: WEST PLAYER (truly vertical hand) -->
    <left>
        <VBox spacing="8" style="-fx-padding: 12; -fx-alignment: CENTER;" prefWidth="150">
            <!-- Name + Turn Indicator -->
            <HBox alignment="CENTER_LEFT" spacing="12">
                <Label fx:id="westNameLabel" text="West" 
                        style="-fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold;" />
                <Region fx:id="westTurnIndicator" prefWidth="0" prefHeight="0" 
                        style="-fx-border-color: transparent; -fx-border-radius: 5; -fx-padding: 4;" />
            </HBox>
            
            <!-- Vertical layout: Flowers stacked on top, then melds, then hand tiles vertical -->
            <HBox fx:id="westFlowers" spacing="2" alignment="CENTER" style="-fx-border-color: #4a6a5a; -fx-border-width: 1; -fx-padding: 2;" prefHeight="40" />
            <HBox fx:id="westMelds" spacing="4" alignment="CENTER" style="-fx-border-color: #4a6a5a; -fx-border-width: 1; -fx-padding: 2;" prefHeight="40" />
            <!-- West hand: vertical stack of tiles, docked with center -->
            <VBox fx:id="westHand" spacing="1" alignment="TOP_CENTER" prefWidth="140" style="-fx-border-color: #5a7a6a; -fx-border-width: 1; -fx-padding: 2;" />
            
            <!-- Discards -->
            <HBox fx:id="westDiscards" spacing="2" alignment="CENTER" />
        </VBox>
    </left>

    <!-- CENTER: DISCARD PILE (fixed 300x300 square) -->
    <center>
        <VBox alignment="CENTER" spacing="8">
            <Label text="Discard Pile" style="-fx-text-fill: white; -fx-font-size: 12px; -fx-font-weight: bold;" />
            <GridPane fx:id="discardPile" alignment="CENTER" hgap="4" vgap="4" 
                     style="-fx-border-color: #666; -fx-border-width: 2; -fx-padding: 12; -fx-background-color: rgba(0,0,0,0.3);"
                     prefWidth="300" prefHeight="300" minWidth="300" minHeight="300" maxWidth="300" maxHeight="300" />
        </VBox>
    </center>

    <!-- RIGHT: EAST PLAYER (truly vertical hand) -->
    <right>
        <VBox spacing="8" style="-fx-padding: 12; -fx-alignment: CENTER;" prefWidth="150">
            <!-- Name + Turn Indicator -->
            <HBox alignment="CENTER_LEFT" spacing="12">
                <Label fx:id="eastNameLabel" text="East" 
                        style="-fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold;" />
                <Region fx:id="eastTurnIndicator" prefWidth="0" prefHeight="0" 
                        style="-fx-border-color: transparent; -fx-border-radius: 5; -fx-padding: 4;" />
            </HBox>
            
            <!-- Vertical layout: Flowers stacked on top, then melds, then hand tiles vertical -->
            <HBox fx:id="eastFlowers" spacing="2" alignment="CENTER" style="-fx-border-color: #4a6a5a; -fx-border-width: 1; -fx-padding: 2;" prefHeight="40" />
            <HBox fx:id="eastMelds" spacing="4" alignment="CENTER" style="-fx-border-color: #4a6a5a; -fx-border-width: 1; -fx-padding: 2;" prefHeight="40" />
            <!-- East hand: vertical stack of tiles, docked with center -->
            <VBox fx:id="eastHand" spacing="1" alignment="TOP_CENTER" prefWidth="140" style="-fx-border-color: #5a7a6a; -fx-border-width: 1; -fx-padding: 2;" />
            
            <!-- Discards -->
            <HBox fx:id="eastDiscards" spacing="2" alignment="CENTER" />
        </VBox>
    </right>
</BorderPane>